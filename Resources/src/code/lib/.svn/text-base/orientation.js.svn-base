require('src/include/require_once').monkeypatch(this)
var display  = require('src/code/lib/display')
var os       = require('src/code/lib/os')
var variable = require('src/code/lib/var')

	function isLandscape() { return (  variable.isValue( Ti.Gesture.orientation, Titanium.UI.LANDSCAPE_LEFT )  ||  variable.isValue( Ti.Gesture.orientation, Titanium.UI.LANDSCAPE_RIGHT )  ) }
	 exports.isLandscape = isLandscape

	function isPortraitPhone() { return variable.isValue( Ti.Gesture.orientation, Titanium.UI.PORTRAIT ) }
	 exports.isPortraitPhone = isPortraitPhone

	function shouldHide() { return (  ( !exports.isPortraitPhone() )  &&  display.isSmall  ) }
	 exports.shouldHide = shouldHide

	function toggleStatusbarOnOrientationChange()
	{// Addint window by window would be nightmare-ish
		if (display.isSmall)
		{
Ti.API.info('Display is small, adding orientation event listener')
Ti.Gesture.addEventListener( 'orientationchange', 
			function(e)
			{
Ti.API.info( 'Orientation changed to ' + Ti.Gesture.orientation )
				if ( exports.shouldHide() )	os.statusHide()
				else						os.statusShow()
			} )
		}
	}exports.toggleStatusbarOnOrientationChange = toggleStatusbarOnOrientationChange